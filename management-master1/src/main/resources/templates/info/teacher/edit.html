<!DOCTYPE html>
<html lang="zh" xmlns:th="http://www.thymeleaf.org" >
<head>
    <th:block th:include="include :: header('修改教师')" />
    <th:block th:include="include :: bootstrap-select-css" />
</head>
<body>
<div class="main-content">
    <form id="form-teacher-edit" class="form-horizontal">
        <input name="Id" id="Id" type="hidden"  th:value="${teacher.Id}" />
        <h4 class="form-header h4">基本信息</h4>
        <div class="row">
            <div class="col-sm-6">
                <div class="form-group">
                    <label class="col-sm-4 control-label is-required">登录账号：</label>
                    <div class="col-sm-8">
                        <input id="userId" name="userId" placeholder="请输入手机号码" th:value="${teacher.userId}" class="form-control" type="text" maxlength="11" required>
                    </div>
                </div>
            </div>
            <div class="col-sm-6">
                <div class="form-group">
                    <label class="col-sm-4 control-label is-required">姓&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;名：</label>
                    <div class="col-sm-8">
                        <input id="userName" name="userName" placeholder="请输入姓名" th:value="${teacher.userName}" class="form-control" type="text" maxlength="30" required>
                    </div>
                </div>
            </div>
        </div>
    </form>
</div>

<th:block th:include="include :: footer" />
<th:block th:include="include :: bootstrap-select-js" />
<script th:inline="javascript">
    var prefix = ctx + "info/teacher";

    $(function () {
        $(function () { $("[data-toggle='tooltip']").tooltip(); });
    });

    $("#form-teacher-edit").validate({
        onkeyup: false,
        rules:{
            userId:{
                isPhone:true,
                minlength: 11,
                maxlength: 11,
                remote: {
                    url: prefix + "/checkUserIdUnique",
                    type: "post",
                    dataType: "json",
                    data: {
                        "userId": function() {
                            return $.common.trim($("#userId").val());
                        }
                    },
                    dataFilter: function(data, type) {
                        return $.validate.unique($.common.trim($("#userId").val()) == [[${teacher.userId}]] ? 0 : data);
                    }
                }
            }
        },
        messages: {
            "userId": {
                remote: "用户已经存在"
            }
        },
        focusCleanup: true
    });;

    function submitHandler() {
        if ($.validate.form()) {
            $.operate.save(prefix + "/update", $('#form-teacher-edit').serialize());
        }
    }
</script>
</body>
</html>